(function(r,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("@reduxjs/toolkit"),require("react/jsx-runtime"),require("react-bootstrap"),require("numeral")):typeof define=="function"&&define.amd?define(["exports","@reduxjs/toolkit","react/jsx-runtime","react-bootstrap","numeral"],c):(r=typeof globalThis<"u"?globalThis:r||self,c(r.AlertList={},r.ReduxToolkit,r.jsxRuntime,r.ReactBootstrap,r.numeral))})(this,(function(r,c,o,u,y){"use strict";const i=c.createEntityAdapter({selectId:t=>t.id,sortComparer:(t,e)=>t.id-e.id}),a=i.getSelectors(),A={nextId:0},f=c.createSlice({name:"alerts",initialState:i.getInitialState(A),reducers:{addAlert:(t,e)=>{if(e.payload.context){const[n]=a.selectAll(t).filter(l=>l.context===e.payload.context);if(n){i.updateOne(t,{id:n.id,changes:{count:n.count+1}});return}}t.nextId+=1,i.addOne(t,{variant:"warning",...e.payload,message:e.payload.message??"Unknown error",count:1,id:t.nextId})},addError:(t,e)=>{t.nextId+=1,i.addOne(t,{...e.payload,message:`[${e.payload.name??"Unknown"}] ${e.payload.message}`,count:1,id:t.nextId})},dismissAlert:(t,e)=>{if(e.payload.id){i.removeOne(t,e.payload.id);return}if(e.payload.context){const[n]=a.selectAll(t).filter(l=>l.context===e.payload.context);if(n){i.removeOne(t,n.id);return}}}},extraReducers:t=>{t.addMatcher(c.isRejected,(e,n)=>{const l=n.type.replace("/rejected",""),[s]=a.selectAll(e).filter(d=>d.context===l);if(s){i.updateOne(e,{id:s.id,changes:{count:s.count+1}});return}e.nextId+=1,i.addOne(e,{context:l,variant:"danger",message:n.error.message??"",id:e.nextId,count:1})}).addMatcher(c.isFulfilled,(e,n)=>{const l=n.type.replace("/fulfilled",""),[s]=a.selectAll(e).filter(d=>d.context===l);if(s){i.removeOne(e,s.id);return}})},selectors:{selectAllAlerts:t=>a.selectAll(t),selectAlertById:(t,e)=>a.selectById(t,e),selectAlertByContext:(t,e)=>{const[n]=a.selectAll(t).filter(l=>l.context===e);return n??null}}}),{addAlert:x,dismissAlert:p}=f.actions,{selectAllAlerts:g,selectAlertById:I,selectAlertByContext:h}=f.selectors;function v({context:t,count:e,badgeProps:n,children:l,...s}){return n?.pill,o.jsxs(u.Alert,{...s,children:[!!t&&o.jsxs(u.Alert.Heading,{children:[t,e>1&&o.jsx(u.Badge,{bg:s.variant,pill:!0,className:"ms-1",...n,children:y(e).format("0,0")})]}),l]})}function S(t){return t.id!==void 0}function m(t){return typeof t=="function"}function j({list:t,contextFilter:e,onDismiss:n,alertProps:l,badgeProps:s}){return o.jsx("div",{children:t.filter(d=>!e||(m(e)?e(d):d.context===e)).map(d=>o.jsx(v,{...l,badgeProps:s,variant:d.variant,dismissible:!0,onClose:()=>n(d),context:d.context,count:d.count,children:d.message},d.id))})}r.AlertList=j,r.addAlert=x,r.alertsAdapter=i,r.alertsExtraState=A,r.alertsSlice=f,r.dismissAlert=p,r.isErrorAlert=S,r.isFilterFunction=m,r.selectAlertByContext=h,r.selectAlertById=I,r.selectAllAlerts=g,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}));
